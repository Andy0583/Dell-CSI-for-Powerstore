# 動態Volume
### 0.建立測試使用Name Space 
```
root@k8s1:~# kubectl create ns andy
namespace/andy created

root@k8s1:~# kubectl get ns
NAME              STATUS   AGE
andy              Active   17m
default           Active   22h
kube-flannel      Active   22h
kube-node-lease   Active   22h
kube-public       Active   22h
kube-system       Active   22h
ps                Active   3h38m
```

### 1.建立Storage Class
* 查看Powerstore Array ID資訊
  
![](https://github.com/Andy0583/Dell-CSI-for-Powerstore/blob/main/image/005.png?raw=true)

* 查看Powerstore NAS Name資訊

![](https://github.com/Andy0583/Dell-CSI-for-Powerstore/blob/main/image/006.png?raw=true)

```
root@k8s1:~# vi sc.yaml
```
> ```
> apiVersion: storage.k8s.io/v1
> kind: StorageClass
> metadata:
>   name: "sc-powerstore"
>   namespace: "ps"
> provisioner: "csi-powerstore.dellemc.com"
> parameters:
>   arrayID: "PS556db8bad5cd"
>   csi.storage.k8s.io/fstype: "nfs"
>   nasName: "andy-nas"
>   allowRoot: "true"
> reclaimPolicy: Delete
> allowVolumeExpansion: true
> volumeBindingMode: Immediate
> ```

```
root@k8s1:~# kubectl create -f sc.yaml
storageclass.storage.k8s.io/sc-powerstore created

root@k8s1:~# kubectl get sc
NAME            PROVISIONER                  RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
sc-powerstore   csi-powerstore.dellemc.com   Delete          Immediate           true                   63s
```

### 2.建立PVC
```
root@k8s1:~# vi pvc.yaml
```
> ```
> kind: PersistentVolumeClaim
> apiVersion: v1
> metadata:
>   name: pvc-powerstore
>   namespace: andy
> spec:
>   accessModes:
>     - ReadWriteMany
>   volumeMode: Filesystem
>   resources:
>     requests:
>       storage: 300Gi
>   storageClassName: sc-powerstore
> ```

# Dell CSI For Powerstoe 實際運用
<body><p align="right">== by Andy Hsu ==</p></body>
### 0.建立測試使用Name Space
```
root@k8s1:~# kubectl create ns andy
namespace/andy created
```

### 1.建立Storage Class
>```
>vi sc.yaml
>
>apiVersion: storage.k8s.io/v1
>kind: StorageClass
>metadata:
>  name: "sc-powerstore"
>  namespace: "ps"
>provisioner: "csi-powerstore.dellemc.com"
>parameters:
>  arrayID: "PS556db8bad5cd"
>  csi.storage.k8s.io/fstype: "nfs"
>  nasName: "andy-nas"
>  allowRoot: "true"
>reclaimPolicy: Delete
>allowVolumeExpansion: true
>volumeBindingMode: Immediate
>```
```
root@k8s1:~# kubectl create -f sc.yaml
storageclass.storage.k8s.io/sc-powerstore created

root@k8s1:~# kubectl get sc
NAME            PROVISIONER                  RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
sc-powerstore   csi-powerstore.dellemc.com   Delete          Immediate           true                   63s
```

### 2.建立PVC
>```
>vi pvc.yaml
>
>kind: PersistentVolumeClaim
>apiVersion: v1
>metadata:
>  name: pvc-powerstore
>  namespace: andy
>spec:
>  accessModes:
>    - ReadWriteMany
>  volumeMode: Filesystem
>  resources:
>    requests:
>      storage: 300Gi
>  storageClassName: sc-powerstore
>```
```
root@k8s1:~# kubectl create -f pvc.yaml
persistentvolumeclaim/pvc-powerstore created

root@k8s1:~# kubectl get pvc -n andy
NAME             STATUS   VOLUME              CAPACITY   ACCESS MODES   STORAGECLASS    AGE
pvc-powerstore   Bound    csivol-668ed320cd   300Gi      RWX            sc-powerstore   29s

root@k8s1:~# kubectl get pv
NAME                CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                 STORAGECLASS    REASON   AGE
csivol-668ed320cd   300Gi      RWX            Delete           Bound    andy/pvc-powerstore   sc-powerstore            47s
```

### 3.建立MySQL-Pod
